<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Django-email-manager : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Django-email-manager</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/paulocheque/django-email-manager">Fork Me on GitHub</a>

          <h1 id="project_title">Django-email-manager</h1>
          <h2 id="project_tagline"></h2>

          <section id="downloads">
            <a class="zip_download_link" href="https://github.com/paulocheque/django-email-manager/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/paulocheque/django-email-manager/tarball/master">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>Django Email Manager</h2>

<p><img src="https://secure.travis-ci.org/paulocheque/django-email-manager.png?branch=master" alt="Continuous Integration Status"></p>

<p>A simple application to manage emails sent by a Django application.</p>

<h1>Installation</h1>

<pre><code>pip install django-email-manager
</code></pre>

<p>or</p>

<pre><code>  # Download zip file
  # Extract it
  # Execute in the extracted directory: python setup.py install
</code></pre>

<h4>Upgrade</h4>

<pre><code>pip install django-email-manager --upgrade --no-deps
</code></pre>

<h1>Motivation</h1>

<ul>
<li>Problem: Bad control of what and how many e-mails have being sent to users.</li>
<li><p>Solution: A simple table that log a summary of each e-mail had been sent. 
A daily routine avoid this table grows uncontrolled and use the data to generate statistics.</p></li>
<li><p>Problem: Important e-mails are deleted from the database when a user change his e-mail.</p></li>
<li><p>Solution: A simple table that store all e-mails independently.</p></li>
<li><p>Usually, good systems do not send attachments by e-mail because this a open door to attacks.</p></li>
</ul><h1>Configuration</h1>

<ul>
<li>settings.py:</li>
</ul><div class="highlight">
<pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
    <span class="s">'email_manager'</span><span class="p">,</span>
<span class="p">)</span>

<span class="c"># This attribute activates a listener to store all e-mails independently of auth_user database.</span>
<span class="n">EMAIL_DATABASE_ACTIVATED</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># If you want to use celery for sending e-mails, you can customize the task name, example:</span>
<span class="n">EMAIL_MANAGER_USING_CELERY</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># default = False</span>
<span class="n">EMAIL_MANAGER_TASK</span> <span class="o">=</span> <span class="s">'email-manager-task'</span> <span class="c"># default = None</span>
</pre>
</div>


<ul>
<li>urls.py</li>
</ul><div class="highlight">
<pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">''</span><span class="p">,</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
     <span class="p">(</span><span class="s">r'^email-manager/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">'email_manager.urls'</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s">'email_manager'</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s">'email_manager'</span><span class="p">)),</span>
<span class="p">)</span>
</pre>
</div>


<ul>
<li>Templates:</li>
</ul><div class="highlight">
<pre><span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="n">email_manager</span><span class="p">:</span><span class="n">define_email_preferences</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="n">email_manager</span><span class="p">:</span><span class="n">send_email_to_groups</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="n">email_manager</span><span class="p">:</span><span class="n">send_email_to_users</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="n">email_manager</span><span class="p">:</span><span class="n">update_statistics</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre>
</div>


<h1>Usage</h1>

<ul>
<li>Manual Test:</li>
</ul><pre><code>/email-manager/send-email-to-groups/
/email-manager/send-email-to-users/
/email-manager/update-statistics/
/email-manager/define_email_preferences/USER_ID
</code></pre>

<ul>
<li>Send e-mails directly in source code:</li>
</ul><div class="highlight">
<pre><span class="kn">from</span> <span class="nn">email_manager.feature_send_email</span> <span class="kn">import</span> <span class="n">EmailSender</span>
<span class="n">EmailSender</span><span class="p">()</span><span class="o">.</span><span class="n">send_email</span><span class="p">(</span><span class="n">emails</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">text_content</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">main_content</span><span class="p">)</span>
<span class="n">EmailSender</span><span class="p">()</span><span class="o">.</span><span class="n">send_email_to_users</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">additional_emails</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">email_type</span><span class="p">)</span>
<span class="n">EmailSender</span><span class="p">()</span><span class="o">.</span><span class="n">send_email_to_groups</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">additional_emails</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">html_content</span><span class="p">,</span> <span class="n">email_type</span><span class="p">)</span>
</pre>
</div>


<ul>
<li>Manual updating statistics:</li>
</ul><pre><code>python manage.py update_email_statistics
</code></pre>

<h1>Change Log</h1>

<h2>Version 0.2.0</h2>

<ul>
<li>2012/02/11 (yyyy/mm/dd)</li>
<li><a href="http://pypi.python.org/pypi/django-email-manager/0.2.0">http://pypi.python.org/pypi/django-email-manager/0.2.0</a></li>
<li>Now emails can have types and users can define which types of e-mails they want to receive.</li>
</ul><h2>Version 0.1.0</h2>

<ul>
<li>2012/02/05 (yyyy/mm/dd)</li>
<li><a href="http://pypi.python.org/pypi/django-email-manager/0.1.0">http://pypi.python.org/pypi/django-email-manager/0.1.0</a></li>
<li>Initial version</li>
</ul><h1>TODO:</h1>

<ul>
<li>Auto update statistics</li>
<li>Simple graphs and reports</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Django-email-manager maintained by <a href="https://github.com/paulocheque">paulocheque</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
